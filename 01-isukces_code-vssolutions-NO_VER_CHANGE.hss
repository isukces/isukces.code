// using System.IO;
var builder = new ProjectBuilder
{
	VisualStudioExe = GlobalVar["MsBuild 18"],
	Nuget = {
		Exe = GlobalVar["Nuget"],
		RepositoryDir = GlobalVar["Private Nuget Repository"],
	},
	ProjectName = "iSukces.Code.VsSolutions",
	SolutionName = "isukces.code",
	SolutionDir = ConfigDir
};

builder.DeleteBinObj();  
// builder.Nuget.Restore();  
Execute("dotnet", "restore", builder.SolutionFileName.FullName);

var version = builder.UpdateVersionCore(VersionNumberStyles.DoNotChange);  
builder.MsBuild();  
  
  
foreach (var options in new[] { PackageNameOptions.Normal, PackageNameOptions.SNupkg })  
{  
    var srcNupkg      = builder.Nuget.GetNugetPackageShortFile(version, options);  
    var nugetCopyFrom = CombinePath(builder.Nuget.CompiledNugetOutputDir, srcNupkg);  
    var nugetCopyTo   = CombinePath(builder.Nuget.RepositoryDir, srcNupkg);  
    Console.WriteLine("Copy {0} to {1}", srcNupkg, nugetCopyTo);  
    File.Copy(nugetCopyFrom, nugetCopyTo, true);  
}  
  
Console.WriteLine("--FINISHED--");